<!--
  - Checkout Screen
  - @author    ThemesBuckets <themesbuckets@gmail.com>
  - @copyright Copyright (c) 2020
  - @license   AppsPlaces
-->

<!-- Header -->
<ion-header no-border>
  <ion-toolbar color="color1">

    <!-- Back to previous page option button -->
    <ion-buttons slot="start">
      <ion-back-button color="white" default-href="" (click)="dismiss()" text="" icon="arrow-round-back">
      </ion-back-button>
      
    </ion-buttons>
    <ion-buttons slot="end">
      <ion-button color="white" (click)="resetPage()">
          <ion-icon name="refresh"></ion-icon>
      </ion-button>
    </ion-buttons>

    <!-- Page title -->
    <ion-title>Add Product</ion-title>
   
  </ion-toolbar>
</ion-header>

<!-- Contents -->
<ion-content id="checkout">

  <!-- Steps of Checkout, steps are - (Billing, Payment, Confirm) -->
  <ion-grid class="ion-padding">
    <ion-row class="ion-text-center">
      <ion-col *ngFor="let item of checks" [ngClass]="{selected: item.isSelected}">
        <ion-icon name="radio-button-on" style="zoom:1.5;" [hidden]="!item.isSelected"></ion-icon>
        <ion-icon name="radio-button-off" style="zoom:1.5;" [hidden]="item.isSelected"></ion-icon>
        
        <br />
        <ion-text>{{item.step}}</ion-text>
      </ion-col>
      <div *ngIf="checks[1].isSelected" class="ion-slide-bar"></div> 
      <div *ngIf="checks[2].isSelected" class="ion-progress-bar"></div>
    </ion-row>
  </ion-grid>

  <!-- Content of Checkout Steps -->
  <!-- Billing Section -->
  <div id="billing" *ngIf="steps[0].isSelected">
    <form class="ion-padding">
      <ion-text *ngIf="error!=null"  style="color: red;margin-top: 20px; text-align: center;">{{error}}</ion-text>
      <!-- Full Name -->
      <ion-row>
        <ion-col>
          <ion-item class="item-background-color">
            <ion-input type="text" placeholder="Product Name" name="pname" [(ngModel)]="productName" required></ion-input>
          </ion-item>
        </ion-col>
      </ion-row>
      <!-- Address 1 -->
      <ion-row>
        <ion-col>
          <ion-item class="item-background-color">
            <ion-input type="text" placeholder="Product Code" name="pcode" [(ngModel)]="productCode"></ion-input>
          </ion-item>
        </ion-col>
      </ion-row>
      <!-- Address 2 -->
      <ion-row>
        <ion-col>
          <ion-item class="item-background-color">
            <ion-input type="text" placeholder="Price" name="price" [(ngModel)]="productPrice"></ion-input>
          </ion-item>
        </ion-col>
      </ion-row>
      <!-- in stock -->
      <ion-row>
        <ion-col>
          <ion-item class="item-background-color">
            <ion-input type="text" placeholder="In stock" name="product_amount" [(ngModel)]="product_amount"></ion-input>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col>
          <!-- City -->
          <ion-item class="item-background-color">
            <ion-input type="text" placeholder="Base Price" name="bprice" [(ngModel)]="base_price"></ion-input>
          </ion-item>
        </ion-col>
        <ion-col>
          <!-- State -->
          <ion-item class="item-background-color">
            <ion-input type="text" placeholder="List Price" name="lprice" [(ngModel)]="list_price"></ion-input>
          </ion-item>
        </ion-col>
      </ion-row>

      <!-- Zip Code -->
      <ion-row>
        <ion-col>
          <ion-item class="item-background-color">
            <ion-textarea rows={6} placeholder="Description" name="des" [(ngModel)]="productDescription"></ion-textarea>
          </ion-item>
        </ion-col>
      </ion-row>
      

      <!-- product category -->
      <ion-row>
        <ion-col>
          <ion-item class="item-background-color">
            <ion-label>Category</ion-label>
            <ion-select [(ngModel)]="categoriesByLevel1_id" [ngModelOptions]="{standalone: true}" (cancel)="onCancel()" (ionChange)="level1clickOption(categoriesByLevel1_id)"data-live-search="true">
              <ion-select-option *ngFor="let categories of categories" [value]="categories.id">{{categories.name}}</ion-select-option>
            </ion-select>
          </ion-item>
        </ion-col>
      </ion-row>
      
      <div *ngIf="categoriesByLevel1_id">
        <div *ngIf="isHaveLevel2Child">
          <ion-row>
            <ion-col>
              <ion-item class="item-background-color">
                <ion-label>Sub-Category</ion-label>
                <ion-select [(ngModel)]="categoriesByLevel2_id" [ngModelOptions]="{standalone: true}" (ionChange)="level2ClickOption(categoriesByLevel2_id)"data-live-search="true">
                  <div *ngFor="let categoriesByLevel2 of categoriesByLevel3">
                  <ion-select-option *ngIf="categoriesByLevel2.parent_id==categoriesByLevel1_id" [value]="categoriesByLevel2.id">{{categoriesByLevel2.name}}</ion-select-option>
                  </div>
                </ion-select>
              </ion-item>
            </ion-col>
          </ion-row>
      </div>
      </div>

      <div *ngIf="categoriesByLevel2_id">
        <div *ngIf="isHaveLevel3Child && isHaveLevel2Child">
          <ion-row>
            <ion-col>
              <ion-item class="item-background-color">
                <ion-label>level3 Sub-Category</ion-label>
                <ion-select [(ngModel)]="categoriesByLevel3_id" [ngModelOptions]="{standalone: true}" (ionChange)="level3ClickOption(categoriesByLevel3_id)" data-live-search="true">
                  <div *ngFor="let categoriesByLevel3 of categoriesByLevel3" >
                  <ion-select-option *ngIf="categoriesByLevel3.parent_id==categoriesByLevel2_id" [value]="categoriesByLevel3.id">{{categoriesByLevel3.name}}</ion-select-option>
                  </div>
                </ion-select>
              </ion-item>
            </ion-col>
          </ion-row>
        </div>
      </div>

      <!-- Status -->
      <ion-row>
        <ion-col>
          <ion-item class="item-background-color">
            <ion-label>Choose Status</ion-label>
            <ion-select [(ngModel)]="status" [ngModelOptions]="{standalone: true}">
              <ion-select-option [value]="A">Active</ion-select-option>
              <ion-select-option [value]="D">Disable</ion-select-option>
              <ion-select-option [value]="H">Hidden</ion-select-option>
            </ion-select>
          </ion-item>
        </ion-col>
      </ion-row>
      

    </form>
  </div>
  <!-- End billing section -->

  <!-- Payment Section -->
  <div id="payment" *ngIf="steps[1].isSelected">
    <ion-list>
      <ion-item-sliding *ngFor="let f of files">
        <ion-item (click)="openFile(f)">
          <ion-icon name="image" slot="start" *ngIf="f.name.endsWith('jpg')"></ion-icon>s         
   
          <ion-label class="ion-text-wrap">
            {{ f.name }}
            <p>{{ f.fullPath }}</p>
          </ion-label>
        </ion-item>
   
        <ion-item-options side="start">
          <ion-item-option (click)="deleteFile(f)" color="danger">
            <ion-icon name="trash" slot="icon-only"></ion-icon>
          </ion-item-option>
        </ion-item-options>
   
      </ion-item-sliding>
    </ion-list>
    <br/>
    <ion-grid>
      <ion-row>
        <ion-col *ngFor="let of images" size ="4">
          <img [src]="img"/>
        </ion-col>
      </ion-row>
    </ion-grid>


    <ion-grid>
      <ion-row *ngFor="let image of imagesArrayforView;let last = last;">
        <ion-col size="9">
          <input type="file" (change)= "onFileSelected($event)" accept="image/*">
        </ion-col >       
        <ion-col size="3" *ngIf="last">
          <ion-text (click)="onUpload()" class="txt-upload" >Upload</ion-text>
          <ion-text *ngIf="addImage" (click)="openAddImageRow()" class="txt-addimg">Add</ion-text>
          <!-- <ion-icon name="cloud-upload" (click)="onUpload()" style="margin-right: 13px;" color="danger"></ion-icon> -->
          <!-- <ion-icon *ngIf="addImage"   ios="ios-add-circle" md="md-add-circle" (click)="openAddImageRow()" color="secondary"></ion-icon>  -->
        </ion-col>
     </ion-row>
    </ion-grid>

    
    
    <ion-grid>
      <h5>For Size</h5>
      <ion-row class="header-row">
        <ion-col size="2">
          Pos 
        </ion-col >
        <ion-col size="3">
          Size
        </ion-col>
        <ion-col size="2">
          Status
        </ion-col>
        <ion-col size="2">     
                           
        </ion-col>
        <ion-col size="3">
          
        </ion-col>
      </ion-row>
       <!-- <div *ngFor="let option of options"> -->
      <ion-row *ngFor="let variant_size of variants_size" class="option-row">
        <!-- <ion-input type="text" hidden="true" [(ngModel)]="option.option_id"></ion-input> -->
        <ion-input type="text" hidden="true" [(ngModel)]="variant_size.id"></ion-input>
        <ion-col size="2">
          <ion-input type="text"  [(ngModel)]="variant_size.position"></ion-input>
        </ion-col >
        <ion-col size="3">
          <ion-input type="text"  [(ngModel)]="variant_size.variant_name"></ion-input>
        </ion-col>
        <ion-col size="2">
          <!-- <ion-input type="text"  [(ngModel)]="variants.status"></ion-input> -->
          <ion-select [(ngModel)]="variant_size.status" [ngModelOptions]="{standalone: true}" value="status">
            <ion-select-option value="A">Active</ion-select-option>
            <ion-select-option value="D">Disable</ion-select-option>
            <ion-select-option value="H">Hidden</ion-select-option>
            
          </ion-select>
        </ion-col>
        <!-- <ion-col size="2">     
                           
        </ion-col> -->
        <ion-col size="5" class="txt-option">
          <ion-text (click)="openAddSizeRow()" class="txt-add">Add</ion-text>
          <ion-text (click)="updateSizeOption()" class="txt-edit">Edit</ion-text>
          <ion-text (click)="updateSizeOption(variant_size.position)" class="txt-delete">Delete</ion-text>
          <!-- <ion-icon  ios="ios-add-circle" md="md-add-circle" (click)="openAddSizeRow()" style="margin-right: 10px; margin-top: 10px;" color="secondary"></ion-icon> 
          <ion-icon name="construct" style="margin-top: 10px;" (click)="updateSizeOption()" color="primary"></ion-icon>
          <ion-icon  ios="ios-trash" md="md-trash" style="margin-left: 10px; color: red;" (click)="updateSizeOption(variant_size.position)" ></ion-icon>  -->
        </ion-col>
      </ion-row>
    <!-- </div> -->
      <ion-row *ngIf="addOptionSize" >
        <ion-col size="2">
          <ion-input type="text" placeholder="postion" [(ngModel)]="optionSizePostion"> </ion-input>
        </ion-col >
        <ion-col size="3">
          <ion-input type="text" placeholder="optionName" [(ngModel)]="optionSizeName"></ion-input>
        </ion-col>
        <ion-col size="2">
          <!-- <ion-input type="text" placeholder="optionStatus" [(ngModel)]="optionStatus"></ion-input> -->
          <ion-select [(ngModel)]="optionSizeStatus" [ngModelOptions]="{standalone: true}" >
            <ion-select-option value="A">Active</ion-select-option>
            <ion-select-option value="D">Disable</ion-select-option>
            <ion-select-option value="H">Hidden</ion-select-option>
            
          </ion-select>
        </ion-col>
        <ion-col size="1">     
                           
        </ion-col>
        <ion-col size="4">
          <ion-text (click)="createSizeOption()" class="txt-done">Done</ion-text>
          <ion-text (click)="closeAddSizeRow()" class="txt-close">Close</ion-text>
          <!-- <ion-icon ios="ios-checkmark-circle" md="md-checkmark-circle" (click)="createSizeOption()" style="margin-top: 10px; font-size: 18px; margin-right: 10px;" color="success"></ion-icon> -->
          <!-- <ion-icon ios="ios-close-circle" md="md-close-circle" style="margin-top: 10px; font-size: 18px; color: red;" (click)="closeAddSizeRow()"></ion-icon> -->
        </ion-col>
      </ion-row>
    <h5>For Color</h5>
    <ion-row class="header-row">
      <ion-col size="2">
        Pos 
      </ion-col >
      <ion-col size="3">
        Color
      </ion-col>
      <ion-col size="2">
        Status
      </ion-col>
      <ion-col size="2">     
                         
      </ion-col>
      <ion-col size="3">
        
      </ion-col>
    </ion-row>
    <!-- <div *ngFor="let option of options"> -->
      <ion-row *ngFor="let variant_color of variants_color" class="option-row">
        <!-- <ion-input type="text" hidden="true" [(ngModel)]="option.option_id"></ion-input> -->
        <ion-input type="text" hidden="true" [(ngModel)]="variant_color.id"></ion-input>
        <ion-col size="2">
          <ion-input type="text"  [(ngModel)]="variant_color.position"></ion-input>
        </ion-col >
        <ion-col size="3">
          <ion-input type="text"  [(ngModel)]="variant_color.variant_name"></ion-input>
        </ion-col>
        <ion-col size="2">
          <!-- <ion-input type="text"  [(ngModel)]="variants.status"></ion-input> -->
          <ion-select [(ngModel)]="variant_color.status" [ngModelOptions]="{standalone: true}" value="status">
            <ion-select-option value="A">Active</ion-select-option>
            <ion-select-option value="D">Disable</ion-select-option>
            <ion-select-option value="H">Hidden</ion-select-option>
            
          </ion-select>
        </ion-col>
        <!-- <ion-col size="2">     
                           
        </ion-col> -->
        <ion-col size="5" class="txt-option">

          <ion-text (click)="openAddColorRow()" class="txt-add">Add</ion-text>
          <ion-text (click)="updateColorOption()" class="txt-edit">Edit</ion-text>
          <ion-text (click)="updateColorOption(variant_color.position)" class="txt-delete">Delete</ion-text>

          <!-- <ion-icon  ios="ios-add-circle" md="md-add-circle" (click)="openAddColorRow()" style="margin-right: 10px; margin-top: 10px;" color="secondary"></ion-icon>  -->
          <!-- <ion-icon name="construct" style="margin-top: 10px;" (click)="updateColorOption()" color="primary"></ion-icon> -->
          <!-- <ion-icon  ios="ios-trash" md="md-trash" style="margin-left: 10px; color: red;" (click)="updateColorOption(variant_color.position)" ></ion-icon>  -->
        </ion-col>
      </ion-row>
    <!-- </div> -->
    <ion-row *ngIf="addOptionColor" >
      <ion-col size="2">
        <ion-input type="text" placeholder="postion" [(ngModel)]="optionColorPostion"> </ion-input>
      </ion-col >
      <ion-col size="3">
        <ion-input type="text" placeholder="optionName" [(ngModel)]="optionColorName"></ion-input>
      </ion-col>
      <ion-col size="2">
        <!-- <ion-input type="text" placeholder="optionStatus" [(ngModel)]="optionStatus"></ion-input> -->
        <ion-select [(ngModel)]="optionColorStatus" [ngModelOptions]="{standalone: true}" >
          <ion-select-option value="A">Active</ion-select-option>
          <ion-select-option value="D">Disable</ion-select-option>
          <ion-select-option value="H">Hidden</ion-select-option>
          
        </ion-select>
      </ion-col>
      <ion-col size="1">     
                         
      </ion-col>
      <ion-col size="4">

        <ion-text (click)="createColorOption()" class="txt-done">Done</ion-text>
        <ion-text (click)="closeAddColorRow()" class="txt-close">Close</ion-text>

        <!-- <ion-icon ios="ios-checkmark-circle" md="md-checkmark-circle" (click)="createColorOption()" style="margin-top: 10px; font-size: 18px; margin-right: 10px;" color="success"></ion-icon> -->
        <!-- <ion-icon ios="ios-close-circle" md="md-close-circle" style="margin-top: 10px; font-size: 18px; color: red;" (click)="closeAddColorRow()"></ion-icon> -->
      </ion-col>
    </ion-row>
  </ion-grid>  
  </div>

  <!-- Payment Complete Section -->
  <!-- Confirm Screen -->
  <div id="complete-section" *ngIf="steps[2].isSelected" style="height: 70%">
    <ion-grid class="ion-padding" style="height: 100%">
      <ion-row class="ion-align-items-center ion-justify-content-center" style="height: 100%; flex-direction: column">
        <div class="ion-text-center ion-padding">
          <ion-icon name="md-checkmark-circle-outline" style="zoom:10.0;" color="medium"></ion-icon>
          <h2>Product Adding Success</h2>
          <p>Your product has been added successfully</p>
        </div>
      </ion-row>
    </ion-grid>
  </div>
</ion-content>

<!-- Footer -->
<ion-footer no-border>
  <ion-toolbar class="ion-padding" transparent>

    <!-- Go To Next Section Button Option  -->
    <!-- This button only visible Step 1 & 2 -->
    <ion-button *ngIf="!steps[2].isSelected" color="color1" expand="block" (click)="next()">Next
    </ion-button>

    <!-- Go To Order Page Button Option  -->
    <!-- This Option will be visible on Step 3 -->
    <!-- <ion-button *ngIf="steps[2].isSelected" color="color1" fill="outline" expand="block" (click)="gotoOrderPage()">My
      Comfirm
    </ion-button> -->

    <!-- Go To Products Page Button Option  -->
    <!-- This Option will be visible on Step 3 -->
    <ion-button *ngIf="steps[2].isSelected" color="color1" expand="block" (click)="gotoProductsPage()">Go Back To Products
    </ion-button>
  </ion-toolbar>
</ion-footer>